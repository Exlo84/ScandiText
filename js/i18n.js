/**
 * Internationalization (i18n) for Nordic Text Editor
 * Provides translations for Norwegian, Swedish, and Danish
 */

export const translations = {
    no: {
        // Header
        mainTitle: "Nordisk Tekstredigering",
        mainSubtitle: "Avansert tekstbehandling for nordiske spr√•k",
        
        // Language buttons
        langNorwegian: "Norsk",
        langSwedish: "Svenska", 
        langDanish: "Dansk",
        
        // Toolbar buttons
        uppercase: "STORE BOKSTAVER",
        lowercase: "sm√• bokstaver",
        titlecase: "Tittel Format",
        cleanText: "Rens Tekst",
        convertToAscii: "√¶/√∏/√• ‚Üí ae/oe/aa",
        
        // Advanced tools
        advancedTools: "Avanserte verkt√∏y",
        findReplace: "Finn og erstatt",
        compareTexts: "Sammenlign tekster",
        export: "Eksporter",
        help: "Hjelp",
        
        // Translation
        translation: "Oversettelse",
        translateToNorwegian: "Til Norsk",
        translateToSwedish: "Til Svenska", 
        translateToDanish: "Til Dansk",
        translating: "Oversetter tekst...",
        translationComplete: "Teksten er oversatt til",
        translationError: "Oversettelse mislyktes:",
        noTextToTranslate: "Ingen tekst √• oversette",
        sameLanguageError: "Teksten er allerede p√• det valgte spr√•ket",
        
        // Statistics
        statsTitle: "Tekststatistikk",
        detectedLanguage: "Gjenkjent spr√•k:",
        words: "Ord:",
        charactersWithSpaces: "Tegn (med mellomrom):",
        charactersNoSpaces: "Tegn (uten mellomrom):",
        sentences: "Setninger:",
        paragraphs: "Avsnitt:",
        readingTime: "Lesetid:",
        avgWordLength: "Gjennomsnittlig ordlengde:",
        avgSentenceLength: "Gjennomsnittlig setningslengde:",
        
        // Status bar
        lastUpdated: "Sist oppdatert:",
        readability: "Lesbarhet:",
        
        // Mobile menu
        statisticsToggle: "üìä Statistikk",
        closeMenu: "‚úï Lukk",
         // Advanced tools
        advancedTools: "Avanserte verkt√∏y",
        findReplace: "Finn og erstatt",
        compareTexts: "Sammenlign tekster", 
        export: "Eksporter",
        help: "Hjelp",
        
        // Tooltips
        uppercaseTooltip: "Konverter all tekst til store bokstaver",
        lowercaseTooltip: "Konverter all tekst til sm√• bokstaver",
        titlecaseTooltip: "Intelligent kapitalisering med nordisk spr√•kst√∏tte",
        cleanTooltip: "Fjern ekstra mellomrom og normaliser tekst",
        asciiTooltip: "Konverter nordiske bokstaver til ASCII-ekvivalenter for kompatibilitet",
        findReplaceTooltip: "S√∏k og erstatt tekst med avanserte alternativer",
        compareTooltip: "Sammenlign to tekster side-ved-side med diff-markering",
        exportTooltip: "Eksporter tekst til TXT, HTML, Word eller PDF format",
        helpTooltip: "Vis hurtigtaster og bruksanvisning",
        
        // Password Generator
        passwordGenerator: "üîê Passordgenerator",
        passwordDescription: "Generer sterke passord med norske ord og tilpassbare innstillinger",
        passwordLength: "Passordlengde:",
        includeNumbers: "Inkluder tall",
        includeSymbols: "Inkluder spesialtegn",
        useNordicWords: "Bruk norske ord",
        generatedPasswords: "Genererte passord:",
        generatePasswords: "üé≤ Generer passord",
        copySelected: "üìã Kopier valgt",
        selectPasswordFirst: "Velg et passord f√∏rst",
        passwordCopied: "Passord kopiert til utklippstavle!",
        passwordsGenerated: "nye passord generert!",
        strength: "Styrke:",
        strengthWeak: "Svakt",
        strengthMedium: "Middels",
        strengthStrong: "Sterkt",
        strengthVeryStrong: "Meget sterkt",
        copyFailed: "Kunne ikke kopiere",
        
        // Social Media Formatter
        socialTextPlaceholder: "Skriv teksten din her for √• optimalisere for sosiale medier...",
        copyFormattedText: "üìã Kopier formatert tekst",
        formattedTextCopied: "Formatert tekst kopiert til utklippstavle!",
        noTextToCopy: "Ingen tekst √• kopiere",
        couldNotCopyText: "Kunne ikke kopiere tekst",
        previewPlaceholder: "Forh√•ndsvisning av formatert tekst vises her...",
        bestPracticesFor: "Beste praksis for",
        
        // Modal buttons
        cancel: "Avbryt",
        close: "Lukk",
        apply: "Bruk",
        save: "Lagre",
        
        // Footer
        reportBugs: "Rapporter feil p√• siden"
    },
    
    se: {
        // Header
        mainTitle: "Nordisk Textredigering",
        mainSubtitle: "Avancerad textbehandling f√∂r nordiska spr√•k",
        
        // Language buttons
        langNorwegian: "Norska",
        langSwedish: "Svenska",
        langDanish: "Danska",
        
        // Toolbar buttons
        uppercase: "STORA BOKST√ÑVER",
        lowercase: "sm√• bokst√§ver",
        titlecase: "Titel Format",
        cleanText: "Rensa Text",
        convertToAscii: "√§/√∂/√• ‚Üí ae/oe/aa",
        
        // Advanced tools
        advancedTools: "Avancerade verktyg",
        findReplace: "S√∂k och ers√§tt",
        compareTexts: "J√§mf√∂r texter",
        export: "Exportera",
        help: "Hj√§lp",
        
        // Translation
        translation: "√ñvers√§ttning",
        translateToNorwegian: "Till Norska",
        translateToSwedish: "Till Svenska",
        translateToDanish: "Till Danska", 
        translating: "√ñvers√§tter text...",
        translationComplete: "Texten √§r √∂versatt till",
        translationError: "√ñvers√§ttning misslyckades:",
        noTextToTranslate: "Ingen text att √∂vers√§tta",
        sameLanguageError: "Texten √§r redan p√• det valda spr√•ket",
        
        // Statistics
        statsTitle: "Textstatistik",
        detectedLanguage: "Identifierat spr√•k:",
        words: "Ord:",
        charactersWithSpaces: "Tecken (med mellanslag):",
        charactersNoSpaces: "Tecken (utan mellanslag):",
        sentences: "Meningar:",
        paragraphs: "Stycken:",
        readingTime: "L√§stid:",
        avgWordLength: "Genomsnittlig ordl√§ngd:",
        avgSentenceLength: "Genomsnittlig meningsl√§ngd:",
        
        // Status bar
        lastUpdated: "Senast uppdaterad:",
        readability: "L√§sbarhet:",
        
        // Mobile menu
        statisticsToggle: "üìä Statistik", 
        closeMenu: "‚úï St√§ng",
        
        // Advanced tools
        advancedTools: "Avancerade verktyg",
        findReplace: "S√∂k och ers√§tt",
        compareTexts: "J√§mf√∂r texter",
        export: "Exportera",
        help: "Hj√§lp",
        
        // Tooltips
        uppercaseTooltip: "Konvertera all text till stora bokst√§ver",
        lowercaseTooltip: "Konvertera all text till sm√• bokst√§ver",
        titlecaseTooltip: "Intelligent kapitalisering med nordisk spr√•kst√∂d",
        cleanTooltip: "Ta bort extra mellanslag och normalisera text",
        asciiTooltip: "Konvertera nordiska bokst√§ver till ASCII-ekvivalenter f√∂r kompatibilitet",
        findReplaceTooltip: "S√∂k och ers√§tt text med avancerade alternativ",
        compareTooltip: "J√§mf√∂r tv√• texter sida vid sida med diff-markering",
        exportTooltip: "Exportera text till TXT, HTML, Word eller PDF-format",
        helpTooltip: "Visa tangentbordsgenv√§gar och anv√§ndarguide",
        
        // Password Generator
        passwordGenerator: "üîê L√∂senordsgenerator",
        passwordDescription: "Generera starka l√∂senord med svenska ord och anpassningsbara inst√§llningar",
        passwordLength: "L√∂senordsl√§ngd:",
        includeNumbers: "Inkludera siffror",
        includeSymbols: "Inkludera specialtecken",
        useNordicWords: "Anv√§nd svenska ord",
        generatedPasswords: "Genererade l√∂senord:",
        generatePasswords: "üé≤ Generera l√∂senord",
        copySelected: "üìã Kopiera valt",
        selectPasswordFirst: "V√§lj ett l√∂senord f√∂rst",
        passwordCopied: "L√∂senord kopierat till urklipp!",
        passwordsGenerated: "nya l√∂senord genererade!",
        strength: "Styrka:",
        strengthWeak: "Svagt",
        strengthMedium: "Medel",
        strengthStrong: "Starkt",
        strengthVeryStrong: "Mycket starkt",
        copyFailed: "Kunde inte kopiera",
        
        // Social Media Formatter
        socialTextPlaceholder: "Skriv din text h√§r f√∂r att optimera f√∂r sociala medier...",
        copyFormattedText: "üìã Kopiera formaterad text",
        formattedTextCopied: "Formaterad text kopierad till urklipp!",
        noTextToCopy: "Ingen text att kopiera",
        couldNotCopyText: "Kunde inte kopiera text",
        previewPlaceholder: "F√∂rhandsgranskning av formaterad text visas h√§r...",
        bestPracticesFor: "B√§sta praxis f√∂r",
        
        // Modal buttons
        cancel: "Avbryt",
        close: "St√§ng",
        apply: "Anv√§nd",
        save: "Spara",
        
        // Footer
        reportBugs: "Rapportera fel p√• sidan"
    },
    
    dk: {
        // Header
        mainTitle: "Nordisk Tekstredigering",
        mainSubtitle: "Avanceret tekstbehandling for nordiske sprog",
        
        // Language buttons
        langNorwegian: "Norsk",
        langSwedish: "Svensk",
        langDanish: "Dansk",
        
        // Toolbar buttons
        uppercase: "STORE BOGSTAVER",
        lowercase: "sm√• bogstaver",
        titlecase: "Titel Format",
        cleanText: "Rens Tekst",
        convertToAscii: "√¶/√∏/√• ‚Üí ae/oe/aa",
        
        // Advanced tools
        advancedTools: "Avancerede v√¶rkt√∏jer",
        findReplace: "Find og erstat",
        compareTexts: "Sammenlign tekster",
        export: "Eksporter",
        help: "Hj√¶lp",
        
        // Statistics
        statsTitle: "Tekststatistik",
        detectedLanguage: "Genkendt sprog:",
        words: "Ord:",
        charactersWithSpaces: "Tegn (med mellemrum):",
        charactersNoSpaces: "Tegn (uden mellemrum):",
        sentences: "S√¶tninger:",
        paragraphs: "Afsnit:",
        readingTime: "L√¶setid:",
        avgWordLength: "Gennemsnitlig ordl√¶ngde:",
        avgSentenceLength: "Gennemsnitlig s√¶tningsl√¶ngde:",
        
        // Status bar
        lastUpdated: "Sidst opdateret:",
        readability: "L√¶sbarhed:",
        
        // Mobile menu
        statisticsToggle: "üìä Statistik",
        closeMenu: "‚úï Luk",
        
        // Advanced tools
        advancedTools: "Avancerede v√¶rkt√∏jer",
        findReplace: "S√∏g og erstat",
        compareTexts: "Sammenlign tekster",
        export: "Eksporter", 
        help: "Hj√¶lp",
        
        // Tooltips
        uppercaseTooltip: "Konverter al tekst til store bogstaver",
        lowercaseTooltip: "Konverter al tekst til sm√• bogstaver",
        titlecaseTooltip: "Intelligent kapitalisering med nordisk sprogsupport",
        cleanTooltip: "Fjern ekstra mellemrum og normaliser tekst",
        asciiTooltip: "Konverter nordiske bogstaver til ASCII-√¶kvivalenter for kompatibilitet",
        findReplaceTooltip: "S√∏g og erstat tekst med avancerede muligheder",
        compareTooltip: "Sammenlign to tekster side om side med diff-markering",
        exportTooltip: "Eksporter tekst til TXT, HTML, Word eller PDF-format",
        helpTooltip: "Vis tastaturgenveje og brugsanvisning",
        
        // Password Generator
        passwordGenerator: "üîê Adgangskodegenerator",
        passwordDescription: "Generer st√¶rke adgangskoder med danske ord og tilpasselige indstillinger",
        passwordLength: "Adgangskodel√¶ngde:",
        includeNumbers: "Inkluder tal",
        includeSymbols: "Inkluder specialtegn",
        useNordicWords: "Brug danske ord",
        generatedPasswords: "Genererede adgangskoder:",
        generatePasswords: "üé≤ Generer adgangskoder",
        copySelected: "üìã Kopier valgt",
        selectPasswordFirst: "V√¶lg en adgangskode f√∏rst",
        passwordCopied: "Adgangskode kopieret til udklipsholder!",
        passwordsGenerated: "nye adgangskoder genereret!",
        strength: "Styrke:",
        strengthWeak: "Svagt",
        strengthMedium: "Mellem",
        strengthStrong: "St√¶rkt",
        strengthVeryStrong: "Mycket st√¶rkt",
        copyFailed: "Kunne ikke kopiere",
        
        // Social Media Formatter
        socialTextPlaceholder: "Skriv din tekst her for at optimere til sociale medier...",
        copyFormattedText: "üìã Kopier formateret tekst",
        formattedTextCopied: "Formateret tekst kopieret til udklippsholder!",
        noTextToCopy: "Ingen tekst at kopiere",
        couldNotCopyText: "Kunne ikke kopiere tekst",
        previewPlaceholder: "Forh√•ndsvisning af formateret tekst vises her...",
        bestPracticesFor: "Bedste praksis for",
        
        // Modal buttons
        cancel: "Annuller",
        close: "Luk",
        apply: "Anvend",
        save: "Gem",
        
        // Footer
        reportBugs: "Rapporter fejl p√• siden"
    }
};

/**
 * i18n helper class for managing translations
 */
export class i18n {
    constructor(defaultLanguage = 'no') {
        this.currentLanguage = defaultLanguage;
    }
    
    /**
     * Set the current language
     * @param {string} language - Language code (no, se, dk)
     */
    setLanguage(language) {
        if (translations[language]) {
            this.currentLanguage = language;
            this.updateUI();
        }
    }
    
    /**
     * Get the current language
     * @returns {string} Current language code
     */
    getCurrentLanguage() {
        return this.currentLanguage;
    }
    
    /**
     * Get translation for a key
     * @param {string} key - Translation key
     * @returns {string} Translated text
     */
    t(key) {
        return translations[this.currentLanguage]?.[key] || translations.no[key] || key;
    }
    
    /**
     * Update all UI elements with current language
     */
    updateUI() {
        // Update main title and subtitle
        const mainTitle = document.getElementById('main-title');
        const mainSubtitle = document.getElementById('main-subtitle');
        if (mainTitle) mainTitle.textContent = this.t('mainTitle');
        if (mainSubtitle) mainSubtitle.textContent = this.t('mainSubtitle');
        
        // Update language buttons
        const langButtons = document.querySelectorAll('.lang-btn');
        langButtons.forEach(btn => {
            const lang = btn.dataset.lang;
            const flag = btn.textContent.match(/üá≥üá¥|üá∏üá™|üá©üá∞/)?.[0] || '';
            switch (lang) {
                case 'no':
                    btn.innerHTML = `üá≥üá¥ ${this.t('langNorwegian')}`;
                    break;
                case 'se':
                    btn.innerHTML = `üá∏üá™ ${this.t('langSwedish')}`;
                    break;
                case 'dk':
                    btn.innerHTML = `üá©üá∞ ${this.t('langDanish')}`;
                    break;
            }
        });
        
        // Update toolbar buttons
        const toolButtons = document.querySelectorAll('[data-transform]');
        toolButtons.forEach(btn => {
            const transform = btn.dataset.transform;
            switch (transform) {
                case 'uppercase':
                    btn.textContent = this.t('uppercase');
                    btn.setAttribute('data-tooltip', this.t('uppercaseTooltip'));
                    break;
                case 'lowercase':
                    btn.textContent = this.t('lowercase');
                    btn.setAttribute('data-tooltip', this.t('lowercaseTooltip'));
                    break;
                case 'titlecase':
                    btn.textContent = this.t('titlecase');
                    btn.setAttribute('data-tooltip', this.t('titlecaseTooltip'));
                    break;
                case 'clean':
                    btn.textContent = this.t('cleanText');
                    btn.setAttribute('data-tooltip', this.t('cleanTooltip'));
                    break;
                case 'ae-convert':
                    btn.textContent = this.currentLanguage === 'se' ? '√§/√∂/√• ‚Üí ae/oe/aa' : '√¶/√∏/√• ‚Üí ae/oe/aa';
                    btn.setAttribute('data-tooltip', this.t('asciiTooltip'));
                    break;
            }
        });
        
        // Update password generator nordic words label
        const nordicWordsLabel = document.getElementById('nordic-words-label');
        if (nordicWordsLabel) {
            nordicWordsLabel.textContent = this.t('useNordicWords');
        }
        
        // Update advanced tools
        const advancedTitle = document.getElementById('advanced-tools-title');
        if (advancedTitle) advancedTitle.textContent = this.t('advancedTools');
        
        const findReplaceBtn = document.getElementById('find-replace-btn');
        if (findReplaceBtn) findReplaceBtn.textContent = this.t('findReplace');
        
        const compareBtn = document.getElementById('compare-btn');
        if (compareBtn) compareBtn.textContent = this.t('compareTexts');
        
        const exportBtn = document.getElementById('export-btn');
        if (exportBtn) exportBtn.textContent = this.t('export');
        
        const helpBtn = document.getElementById('help-btn');
        if (helpBtn) helpBtn.textContent = this.t('help');
        
        const advancedButtons = document.querySelectorAll('[data-tool]');
        advancedButtons.forEach(btn => {
            const tool = btn.dataset.tool;
            switch (tool) {
                case 'find-replace':
                    btn.textContent = this.t('findReplace');
                    btn.setAttribute('data-tooltip', this.t('findReplaceTooltip'));
                    break;
                case 'compare':
                    btn.textContent = this.t('compareTexts');
                    btn.setAttribute('data-tooltip', this.t('compareTooltip'));
                    break;
                case 'export':
                    btn.textContent = this.t('export');
                    btn.setAttribute('data-tooltip', this.t('exportTooltip'));
                    break;
                case 'help':
                    btn.textContent = this.t('help');
                    btn.setAttribute('data-tooltip', this.t('helpTooltip'));
                    break;
            }
        });
        
        // Update modal titles when they appear
        const modalTitles = document.querySelectorAll('.modal-title');
        modalTitles.forEach(title => {
            const titleText = title.textContent.toLowerCase();
            if (titleText.includes('finn') || titleText.includes('find') || titleText.includes('s√∏k')) {
                title.textContent = this.t('findReplace');
            } else if (titleText.includes('sammenlign') || titleText.includes('j√§mf√∂r') || titleText.includes('compare')) {
                title.textContent = this.t('compareTexts');
            } else if (titleText.includes('eksporter') || titleText.includes('exportera') || titleText.includes('export')) {
                title.textContent = this.t('export');
            } else if (titleText.includes('hjelp') || titleText.includes('hj√§lp') || titleText.includes('help')) {
                title.textContent = this.t('help');
            }
        });
        
        // Update modal labels and form elements
        const formLabels = document.querySelectorAll('.modal .form-label');
        formLabels.forEach(label => {
            const labelText = label.textContent.toLowerCase();
            if (labelText.includes('s√∏k') || labelText.includes('find')) {
                label.textContent = this.currentLanguage === 'se' ? 'S√∂k efter:' : 
                                   this.currentLanguage === 'dk' ? 'S√∏g efter:' : 'S√∏k etter:';
            } else if (labelText.includes('erstatt') || labelText.includes('ers√§tt') || labelText.includes('erstat')) {
                label.textContent = this.currentLanguage === 'se' ? 'Ers√§tt med:' : 
                                   this.currentLanguage === 'dk' ? 'Erstat med:' : 'Erstatt med:';
            }
        });
        
        // Update modal buttons
        const modalButtons = document.querySelectorAll('.modal .btn');
        modalButtons.forEach(btn => {
            const btnText = btn.textContent.toLowerCase();
            if (btnText.includes('avbryt') || btnText.includes('cancel') || btnText.includes('annuller')) {
                btn.textContent = this.currentLanguage === 'se' ? 'Avbryt' : 
                                 this.currentLanguage === 'dk' ? 'Annuller' : 'Avbryt';
            } else if (btnText.includes('lukk') || btnText.includes('st√§ng') || btnText.includes('luk')) {
                btn.textContent = this.currentLanguage === 'se' ? 'St√§ng' : 
                                 this.currentLanguage === 'dk' ? 'Luk' : 'Lukk';
            }
        });
        
        // Update statistics panel
        const statsTitle = document.getElementById('stats-title');
        if (statsTitle) statsTitle.textContent = this.t('statsTitle');
        
        // Update stat labels directly by ID (more reliable than text matching)
        const detectedLangLabel = document.getElementById('detected-lang-label');
        if (detectedLangLabel) detectedLangLabel.textContent = this.t('detectedLanguage');
        
        const wordsLabel = document.getElementById('words-label');
        if (wordsLabel) wordsLabel.textContent = this.t('words');
        
        const charsWithSpacesLabel = document.getElementById('chars-with-spaces-label');
        if (charsWithSpacesLabel) charsWithSpacesLabel.textContent = this.t('charactersWithSpaces');
        
        const charsNoSpacesLabel = document.getElementById('chars-no-spaces-label');
        if (charsNoSpacesLabel) charsNoSpacesLabel.textContent = this.t('charactersNoSpaces');
        
        const sentencesLabel = document.getElementById('sentences-label');
        if (sentencesLabel) sentencesLabel.textContent = this.t('sentences');
        
        const paragraphsLabel = document.getElementById('paragraphs-label');
        if (paragraphsLabel) paragraphsLabel.textContent = this.t('paragraphs');
        
        const readingTimeLabel = document.getElementById('reading-time-label');
        if (readingTimeLabel) readingTimeLabel.textContent = this.t('readingTime');
        
        const avgWordLengthLabel = document.getElementById('avg-word-length-label');
        if (avgWordLengthLabel) avgWordLengthLabel.textContent = this.t('avgWordLength');
        
        const avgSentenceLengthLabel = document.getElementById('avg-sentence-length-label');
        if (avgSentenceLengthLabel) avgSentenceLengthLabel.textContent = this.t('avgSentenceLength');
        
        // Update footer links
        const bugReportLink = document.getElementById('bug-report-link');
        if (bugReportLink) {
            bugReportLink.textContent = `üêõ ${this.t('reportBugs')}`;
        }
    }
}
